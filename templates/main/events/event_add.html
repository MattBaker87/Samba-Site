{% extends "main/base_new.html" %}

{% block title %}Add event{% endblock %}

{% block heading %}Add an event{% endblock %}

{% block sub-nav %}
    {% load get_events %}
    {% get_future_events as event_list %}
    <table class="condensed-table dimmed">
        <thead>
            <tr>
                <th colspan="2">Upcoming events</th>
            </tr>
        </thead>
        <tbody>
            {% for event in event_list %}
                <tr>
                    <td><a href="{{ event.get_absolute_url }}">{{ event.name }}</a></td>
                    <td>{{ event.when }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block content %}
    <p>Please use the location box for the meeting point, and the time box for the meeting time. You can then add any further details in the notes box.</p>
    <form action="" method="post">
        {% csrf_token %}
        <fieldset>
            {% for boundfield in form.non_instrument_fields %}
                <div class="clearfix {% if boundfield.errors %}error{% endif %}">
                    {{ boundfield.label_tag }}
                    <div class="input">
                        {{ boundfield }}
                        {% if boundfield.errors %}
                            {% for error in boundfield.errors %}
                                <span class="{% if boundfield.name == "name" or boundfield.name == "notes"  %}help-block{% else %}help-inline{% endif %}">{{ error }}</span>
                            {% endfor %}
                        {% else %}
                            <span class="help-inline">{{ boundfield.help_text }}</span>
                        {% endif %}
    				</div>
    			</div>
    		{% endfor %}
			<div class="clearfix">
			    <label id="optionsCheckboxes">Instruments</label>
			    <div class="input with-help">
			        <ul class="inputs-list">
                        <div class="optionsCheckboxes-help help-inline">These are the instruments which can be sign-ed out for this event</div>
			            {% for boundfield in form.instrument_fields %}
			                <li>
    			                <label>
    			                    {{ boundfield }}
    			                    <span>{{ boundfield.label }}</span>
    			                </label>
    			            </li>
    			        {% endfor %}
			        </ul>
			    </div>
			</div>
    	</fieldset>
        <div class="input">
            <button class="btn success" type="submit">Add event</button>
            <a href="{% url events_upcoming %}" class="btn danger">Cancel</a>
        </div>
    </form>
{% endblock %}

{% block options %}
    <p><a href="{% url events_upcoming %}">Back to events list</a></p>
{% endblock %}

{% block bottom %}
    <br>
    <ul class="breadcrumb">
    	<li>
    		<a href="{% url home %}">Home</a>
    		<span class="divider">/</span>
    	</li>
    	<li>
    	    <a href="{% url events_upcoming %}">Events</a>
    	    <span class="divider">/</span>
    	</li>
    	<li class="active">
    		<a href="#">Add event</a>
    	</li>
    </ul>
{% endblock %}

{% block wireframe_content %}
    <ul>
        <li>TODO asap:
            <ul>
                <li>Clean up CSS so this isn't really ugly</li>
                <li>Add a decent date-time widget, so it's not a nightmare entering when the event is</li>
            </ul>
        </li>
        <li>TODO lower priority:
            <ul>
                <li>Make this page admin-only</li>
            </ul>
        </li>
    </ul>
{% endblock %}

{% block wireframe_links %}

{% endblock %}